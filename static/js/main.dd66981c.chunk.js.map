{"version":3,"sources":["camera.js","resource.js","assets/buttons/buttons.png","assets/backgrounds/bg_world.gif","assets/cursors/axe.png","pixicomponent.js","assets/0.png","assets/trees/shadowSinglesSheet.png","assets/cursors/axe_rotated.png","board.js","load.js","assets/blocks/sheet.png","sprite.js","spritesheet.js","vault.js","index.js"],"names":["Camera","x","config","INIT_X","y","INIT_Y","speed","zoom","min_zoom","max_zoom","angle","Resource","params","i","j","id","img","birth","life","maxLife","this","PixiComponent","camera","props","state","tiles","resources","selectedBlock","isBuilding","blocksSheet","blocksData","target","app","PIXI","width","window","innerWidth","height","innerHeight","backgroundAlpha","document","body","appendChild","view","style","position","left","top","renderBackground","container","sortableChildren","stage","addChild","emptyTex","from","renderButtons","baseTexture","blSheet","parse","Object","keys","textures","map","t","treeTex","tSheet","treeData","renderTilemap","border","lineStyle","drawRect","screen","interactive","on","e","onMouseDown","onMouseUp","onMouseMove","addEventListener","resize","renderer","onWheel","ticker","add","delta","update","block","removeChildren","updateProjection","isOnScreen","TILESIZE","renderProjection","stop","entity","BOARD_SIZE","Vec2D","bgTex","background","bgSprite","btnSheet","sheet","btnSheetJson","rotateAntiBtn","buttonMode","centerBtn","rotateBtn","stopPropagation","tint","onRotateAntiBtn","onCenterBtn","onRotateBtn","zIndex","alpha","blendMode","ADD","tZ","dX","getBoardCenter","dY","dTileX","Math","round","dTileY","dInitY","ceil","centerTile","nCols","nRows","minI","maxI","minJ","maxJ","isMouseOnResource","tile","resTex","resource","dim","NORMAL","mousePosition","plugins","interaction","mouse","global","anchor","set","h","frame","w","isPointInRect","cursor","CursorAxe","component","ref","thisDiv","gameCanvas","oldW","oldH","targetW","targetH","deltaW","deltaH","clear","React","x1","y1","BuildBlock","placeI","placeJ","Board","handleMouseClick","event","eX","data","eY","handleResourceEvent","type","setState","isMouseDown","lastX","lastY","lastDragX","lastDragY","performance","now","dT","lastClick","handleDoubleClick","handleClick","treeSpots","vault","isDragging","isNewBoard","loadEmpty","center","slice","floor","spotList","push","spot","idxs","split","length","treeChance","globalChance","random","s","evalSpot","splice","assign","offX","offY","button","resourceHit","console","log","undefined","lastEvent","percent","img_id","mousePos","lastDrag","offset","subtract","buttons","updateCamera","placeBlock","direction","matrix","resMatrix","oldCenterX","getCenter","resetSpotList","rows","cols","grid","resGrid","Array","dirI","dirJ","addSpot","xOffset","idx","convertToMap","topFactor","getTopFactor","screenX","screenY","limit","TILESIZE_Z","TILE_HALF","trunc","tx","cx","cy","tcy","tcx","offsetY","abs","mX","oldI","oldJ","Infinity","isAtCorner","hasNeighbour","right","up","down","upLeft","upRight","downLeft","downRight","scroll","deltaY","oldZoom","newZoom","oldHeight","dH","className","bind","onResourceEvent","rotate","preventDefault","forceUpdate","respawnTimer","setInterval","respawn","removeEventListener","clearInterval","Component","code","onmessage","cmd","PROGRESS_BOARD_LOAD","columns","defaultValue","Int8Array","count","cProgress","self","postMessage","buffer","JSON","stringify","toString","substring","indexOf","lastIndexOf","blob","Blob","worker_script","URL","createObjectURL","Sprite","filename","scaleX","scaleY","backgroundImage","backgroundPosition","backgroundRepeat","transformOrigin","transform","defaultProps","SpriteSheet","sprite","spriteData","Vault","wood","ore","food","money","STATE_LOADING","STATE_RUNNING","Game","overflow","loadProgress","loadText","current","loadBoard","list","fill","val","name","image","text","arr","Worker","boardWorker","Config","progress","matrixify","content","renderLoadingScreen","renderGame","accordions","index","blockName","blockDesc","blockPrice","Card","sx","display","Box","flexDirection","CardContent","flex","Typography","variant","color","maxWidth","alignItems","pl","pb","IconButton","onClick","toggleBuild","renderCardButton","marginLeft","marginTop","key","card","Accordion","AccordionSummary","expandIcon","backgroundColor","borderRadius","flexShrink","AccordionDetails","rowHeight","rowRenderer","renderRow","rowCount","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.dd66981c.chunk.js","sourcesContent":["import config from './config.json'\r\n\r\n/**\r\n * Camera class for board camera operations\r\n */\r\n export default class Camera {\r\n    x = config.INIT_X;  // current x position of the camera\r\n    y = config.INIT_Y; // current y position of the camera\r\n    speed = 1; // camera speed\r\n    zoom = 1; // current zoom of the camera to the board\r\n    min_zoom = 0.8; // camera height in tiles\r\n    max_zoom = 2; // camera max zoom\r\n    angle = 0; // current camera angle (from 0 to 3 (0, 90, 180 and 270 degrees))\r\n }\r\n","/**\r\n * Resource class for resource data\r\n */\r\n export default class Resource {\r\n    i = -1;  // current i position of resource\r\n    j = -1; // current j position of resource\r\n    id = -1; // id of resource\r\n    img = null; // image name of resource\r\n    birth = -1; // the timestamp of the birth of this resource\r\n    life = -1; // the current life of this resource (depleted when <= 0)\r\n    maxLife = -1; // the max life of resource\r\n\r\n    // constructor just sets the values received in params\r\n    constructor(params = {i:-1, j:-1, id:-1, img:null, birth:-1, life:-1, maxLife:-1}) {\r\n        this.i = params.i; this.j = params.j; this.id = params.id; this.maxLife = params.maxLife;\r\n        this.img = params.img; this.birth = params.birth; this.life = params.life;\r\n    }\r\n\r\n    // sets whole data set of resource\r\n    set(params = {i:-1, j:-1, id:-1, img:null, birth:-1, life:-1, maxLife:-1}) {\r\n        this.i = params.i; this.j = params.j; this.id = params.id; this.maxLife = params.maxLife;\r\n        this.img = params.img; this.birth = params.birth; this.life = params.life;\r\n    }\r\n }","export default __webpack_public_path__ + \"static/media/buttons.c096f3b1.png\";","export default __webpack_public_path__ + \"static/media/bg_world.4fae2a5e.gif\";","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAABnRSTlMAAAAAAABupgeRAAACqUlEQVRIie2Vy1LcRhSG/77qjhnGGE8xJKbKY3vhhVmk8gZ+8TyCy9k4ZUKoeCZchhkkoZ6+eiEKsAlGkIldrvK/kbpO63znb0nnAN+7SJdNScQ2N+KL5R9/1d0BvMsmxkiRie5JOwFebCbPh3HVuHf7zeoKf/mzvAiVdQbg739Us3D3BxQpG/ajWWU/HOg8ZispvQxlAgBjizs7WHsgpThPxDmdVda4sL0VS0GVAoA4vp7hbgBxcdaC46S0cUy3t2JrUVb/DdDW/mwz6RXCeFgPDifgKSVt7UkMALv7CsD4UAHQxt8JIIpMjIbJ+gpXFo2BtdZa09bOOYr8EjA5Und2cFUhBO9DCB4AIeAchEApD6BXcADplAJQxvtwL4BzTmvT3jOGIodSfjzWAHZGOYCT0gLYm+ozffspnQMa5QAczw0AgiA5dT44HwghhBAQtKmU9gAGfQngpHFdfLD2UtZ2OjdnJkxmNovYT+txALT1lFIpI2XJ+0PdOMC4qnGvf1kbDdPZqWFArb1xXyLQL8SWInZ1MZ2byZE6nNv9qY04295I8pgnAtb5vQMN4Lc3s3cTxYHdsdp6FI2GCVzIJQVw0/v43x3c2K4fP4wH6+c/blmb6y3616dZvxCDvowl3R2r3bE6rOxRZT/b9u0c3KoiYYKRV0/S1Yz3Cr6ai7d/1r/v1cqGg/LSR6eB868qGwegVi4WNJZs0JeTqc4iBnwyJNgNj3fVaePHJ0YtXNv7Bn35IOML5SJBa+2XANA2NNqnkqWSJhFdzTmA47kNIczVMgAXarQPAZITAIN+lCdsVtlU0uUAGu2nlZWMtD52RkUSsQ8Hi2xZgKuks4VLI1Y1ljPSK/gyAa2PRodcUuvC1qOoV/D7f6Y3ybhwXBopqEOHefRDX0EfATpuScg4wyptAAAAAElFTkSuQmCC\"","import * as React from 'react';\r\nimport * as PIXI from 'pixi.js';\r\nimport emptyTile from './assets/0.png';\r\nimport btnSheet from './assets/buttons/buttons.png';\r\nimport btnSheetJson from './assets/buttons/buttons.json';\r\nimport treeSheet from './assets/trees/shadowSinglesSheet.png';\r\nimport treeData from './assets/trees/shadowSinglesSheet.json';\r\nimport config from './config.json';\r\nimport * as Vec2D from 'vector2d';\r\nimport background from './assets/backgrounds/bg_world.gif';\r\nimport CursorAxe from './assets/cursors/axe.png'\r\n\r\nexport class PixiComponent extends React.Component {\r\n  /**\r\n   * After mounting, add the Pixi Renderer to the div and start the Application.\r\n   */\r\n  componentDidMount() {\r\n    this.camera = this.props.state.camera;\r\n    this.tiles = this.props.state.tiles;\r\n    this.resources = this.props.state.resources;\r\n    this.selectedBlock = this.props.selectedBlock;\r\n    this.isBuilding = this.selectedBlock > -1 ? true : false;\r\n    this.blocksSheet = this.props.blocksSheet; this.blocksData = this.props.blocksData;\r\n    this.target = -1 // no target at the start\r\n\r\n    this.app = new PIXI.Application({ \r\n      width: window.innerWidth*0.70, height: window.innerHeight*0.95, \r\n      backgroundAlpha: 0, \r\n    });\r\n    document.body.appendChild(this.app.view);\r\n    this.app.view.style.position = 'absolute';this.app.view.style.left = '20px';this.app.view.style.top = '20px';\r\n    // creates and renders background\r\n    this.renderBackground();\r\n    // create tiles and sprites container\r\n    this.container = new PIXI.Container();\r\n    this.container.sortableChildren = true;\r\n    this.app.stage.addChild(this.container);\r\n\r\n    // Create empty slot texture\r\n    this.emptyTex = PIXI.Texture.from(emptyTile);\r\n\r\n    // loads buttons spritesheet and render them when loading is complete\r\n    this.renderButtons();\r\n\r\n    // creates blocks spritesheet to render them\r\n    const baseTexture = PIXI.BaseTexture.from(this.props.blocksSheet);\r\n    this.blSheet = new PIXI.Spritesheet(baseTexture, this.props.blocksData);\r\n    this.blSheet.parse(() => {\r\n      Object.keys(this.blSheet.textures).map((t) => this.blSheet.textures[t]);\r\n    });\r\n\r\n    // creates resources spritesheet to render them\r\n    const treeTex = PIXI.BaseTexture.from(treeSheet);\r\n    this.tSheet = new PIXI.Spritesheet(treeTex, treeData);\r\n    this.tSheet.parse(() => {\r\n      Object.keys(this.tSheet.textures).map((t) => this.tSheet.textures[t]);\r\n    });\r\n\r\n    // renders tilemap\r\n    this.renderTilemap();\r\n\r\n    // border\r\n    this.border = new PIXI.Graphics();\r\n\r\n    // set the line style to have a width of 5 and set the color to red\r\n    this.border.lineStyle(2, 0x000000);\r\n\r\n    // draw a rectangle border\r\n    this.border.drawRect(this.app.screen.x, this.app.screen.y+1, this.app.screen.width-1, this.app.screen.height-2);\r\n    this.app.stage.addChild(this.border);\r\n\r\n    // mouse interation callbacks\r\n    this.app.stage.interactive = true;\r\n    this.app.stage.on(\"pointerdown\", (e) => this.props.onMouseDown(e, this.target));\r\n    this.app.stage.on(\"pointerup\", (e) => this.props.onMouseUp(e, this.target));\r\n    this.app.stage.on(\"pointermove\", (e) => this.props.onMouseMove(e, this.target));\r\n\r\n    window.addEventListener('resize', (e) => this.resize());\r\n    this.app.renderer.view.addEventListener('wheel', (e) => this.props.onWheel(e));\r\n    \r\n    // Listen for animate update\r\n    this.app.ticker.add((delta) => {\r\n      this.update(delta);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Perform updates based on changes that happened since last tick\r\n   * @param {delta} delta the delta time from last tick\r\n   */\r\n  update(delta) {\r\n    // updates data sent via props\r\n    this.camera = this.props.state.camera;\r\n    this.tiles = this.props.state.tiles;\r\n    this.resources = this.props.state.resources;\r\n    this.selectedBlock = this.props.selectedBlock;\r\n    this.isBuilding = this.selectedBlock > -1 ? true : false;\r\n    this.blocksSheet = this.props.blocksSheet; this.blocksData = this.props.blocksData;\r\n    this.block = this.props.state.block;\r\n\r\n    // clears container\r\n    this.container.removeChildren();\r\n    // start rendering \r\n    this.renderTilemap(); // render tilemap\r\n    if(this.isBuilding) { // if it is in building mode\r\n      this.block = this.props.updateProjection(); // updates projection via props method\r\n      if(this.isOnScreen(this.block, config.TILESIZE*this.camera.zoom, config.TILESIZE*this.camera.zoom))\r\n        this.renderProjection(); // render projection (if its on screen)\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * Stop the Application when unmounting.\r\n   */\r\n  componentWillUnmount() {\r\n    this.app.stop();\r\n  }\r\n\r\n  /**\r\n   * Checks if an entity is on viewport screen\r\n   * @param {*} entity the entity to check\r\n   */\r\n  isOnScreen(entity, width, height) {\r\n    let onScreen = !((entity.x > this.app.screen.width) || (entity.x < this.app.screen.x-(width)) ||\r\n                      entity.y > this.app.screen.height || (entity.y < this.app.screen.y-(height)));\r\n    return onScreen;\r\n  }\r\n\r\n  /**\r\n   * Returns a Vec2D with the coordinates to center isometric map with camera at 0\r\n   */\r\n  getBoardCenter() {\r\n    let j = config.BOARD_SIZE;\r\n    let i = config.BOARD_SIZE;\r\n    return new Vec2D.Vector(this.app.screen.width/2 - config.TILESIZE*this.camera.zoom/2 \r\n                                                      - (j-i)*(config.TILESIZE*this.camera.zoom/2)/2, \r\n                                                      this.app.screen.height*0.95/2 - (i+j)*(config.TILESIZE*this.camera.zoom/4)/2);\r\n  }\r\n\r\n  // create and renders background\r\n  renderBackground() {\r\n    // first set the texture\r\n    this.bgTex = new PIXI.Texture.from(background);\r\n    // create the sprite\r\n    this.bgSprite = new PIXI.Sprite(this.bgTex);\r\n    // set the width of the sprite\r\n    this.bgSprite.width = this.app.screen.width;\r\n    this.bgSprite.height = this.app.screen.height;\r\n    // finally add the new sprite\r\n    this.app.stage.addChild(this.bgSprite);\r\n  }\r\n\r\n  // create and renders buttons\r\n  renderButtons() {\r\n    // builds buttons spritesheet\r\n    const baseTexture = PIXI.BaseTexture.from(btnSheet);\r\n    const sheet = new PIXI.Spritesheet(baseTexture, btnSheetJson);\r\n    sheet.parse(() => {\r\n      Object.keys(sheet.textures).map((t) => sheet.textures[t]);\r\n    });\r\n    // create the rotate anticlockwise btn sprite\r\n    this.rotateAntiBtn = new PIXI.Sprite(sheet.textures[\"LeftArrow (1).png\"]);\r\n    this.rotateAntiBtn.interactive = true;\r\n    this.rotateAntiBtn.buttonMode = true;\r\n    // create the center btn sprite\r\n    this.centerBtn = new PIXI.Sprite(sheet.textures[\"Home (1).png\"]);\r\n    this.centerBtn.interactive = true;\r\n    this.centerBtn.buttonMode = true;\r\n    // create the rotate clockwise btn sprite\r\n    this.rotateBtn = new PIXI.Sprite(sheet.textures[\"RightArrow (1).png\"]);\r\n    this.rotateBtn.interactive = true;\r\n    this.rotateBtn.buttonMode = true;\r\n    // set the position and dimensions \r\n    this.rotateAntiBtn.position.x = 30\r\n    this.rotateAntiBtn.position.y = 30;\r\n    this.rotateAntiBtn.width = 30;\r\n    this.rotateAntiBtn.height = 30;\r\n\r\n    this.centerBtn.position.x = this.rotateAntiBtn.position.x + this.rotateAntiBtn.width + 10;\r\n    this.centerBtn.position.y = this.rotateAntiBtn.position.y;\r\n    this.centerBtn.width = 30;\r\n    this.centerBtn.height = 30;\r\n    \r\n    this.rotateBtn.position.x = this.centerBtn.position.x + this.rotateAntiBtn.width + 10;\r\n    this.rotateBtn.position.y = this.centerBtn.position.y;\r\n    this.rotateBtn.width = 30;\r\n    this.rotateBtn.height = 30;\r\n    // set the callbacks\r\n    this.rotateAntiBtn.on(\"pointerdown\", (e) => {e.stopPropagation(); this.rotateAntiBtn.tint=0x1FC012});\r\n    this.rotateAntiBtn.on(\"pointerout\", (e) => {e.stopPropagation(); this.rotateAntiBtn.tint=0xFFFFFF});\r\n    this.rotateAntiBtn.on(\"pointerup\", (e) => {e.stopPropagation(); this.rotateAntiBtn.tint=0xFFFFFF});\r\n    this.rotateAntiBtn.on(\"click\", (e) => this.props.onRotateAntiBtn(e));\r\n\r\n    this.centerBtn.on(\"pointerdown\", (e) => {e.stopPropagation(); this.centerBtn.tint=0x1FC012});\r\n    this.centerBtn.on(\"pointerout\", (e) => {e.stopPropagation(); this.centerBtn.tint=0xFFFFFF});\r\n    this.centerBtn.on(\"pointerup\", (e) => {e.stopPropagation(); this.centerBtn.tint=0xFFFFFF});\r\n    this.centerBtn.on(\"click\", (e) => this.props.onCenterBtn(e));\r\n\r\n    this.rotateBtn.on(\"pointerdown\", (e) => {e.stopPropagation(); this.rotateBtn.tint=0x1FC012});\r\n    this.rotateBtn.on(\"pointerout\", (e) => {e.stopPropagation(); this.rotateBtn.tint=0xFFFFFF});\r\n    this.rotateBtn.on(\"pointerup\", (e) => {e.stopPropagation(); this.rotateBtn.tint=0xFFFFFF});\r\n    this.rotateBtn.on(\"click\", (e) => this.props.onRotateBtn(e));\r\n    // finally add the new button\r\n    this.app.stage.addChild(this.rotateAntiBtn);\r\n    this.app.stage.addChild(this.centerBtn);\r\n    this.app.stage.addChild(this.rotateBtn);\r\n  }\r\n\r\n  /**\r\n   * Render projected tile for building blocks mode\r\n   */\r\n  renderProjection() {\r\n    // create and add block projection to the container\r\n    const block = new PIXI.Sprite(this.blSheet.textures[this.selectedBlock+\".png\"]);\r\n    block.zIndex = this.block.zIndex;\r\n    block.x = this.block.x;\r\n    block.y = this.block.y;\r\n    block.alpha = 0.5;\r\n    block.blendMode = PIXI.BLEND_MODES.ADD;\r\n    block.width = config.TILESIZE*this.camera.zoom;\r\n    block.height = config.TILESIZE*this.camera.zoom;\r\n    this.container.addChild(block);\r\n  }\r\n\r\n  /**\r\n   * Do some culling directly on loop scope\r\n   * to render only visible tiles and renders them \r\n   */\r\n  renderTilemap() {\r\n    let tZ= config.TILESIZE*this.camera.zoom;\r\n    let dX = this.camera.x - this.getBoardCenter().x;\r\n    let dY = this.camera.y - this.getBoardCenter().y;\r\n    let dTileX = Math.round(dX / (tZ/2));\r\n    let dTileY = Math.round(dY / (tZ/2));\r\n    let dInitY = Math.ceil(config.BOARD_SIZE / (2));\r\n    let centerTile = [Math.round(config.BOARD_SIZE/2), Math.round(config.BOARD_SIZE/2)];\r\n    let nCols = Math.ceil(this.app.screen.width / (tZ/2))+5;\r\n    let nRows = Math.ceil(this.app.screen.height / (tZ/2))+6;\r\n    let minI = (centerTile[0]+centerTile[1]-dTileY-dInitY) - (Math.ceil(nRows/2)); let maxI = (centerTile[0]+centerTile[1]-dTileY-dInitY) + (Math.ceil(nRows/2));\r\n    let minJ = (centerTile[0]-centerTile[1]-dTileX) - (Math.ceil(nCols/2)); let maxJ = (centerTile[0]-centerTile[1]-dTileX) + (Math.ceil(nCols/2));\r\n\r\n    let isMouseOnResource = false;\r\n\r\n    // loops only in the visible scope of tiles\r\n    for(let i = minI; i < maxI; i++) {\r\n      for(let j = minJ; j < maxJ; j++) {\r\n        let x = Math.round(i+j/2); // conversion to find the correct tile index visible\r\n        let y = Math.round(i-j/2); \r\n        // border control\r\n        if(x<0 || x>=config.BOARD_SIZE || y<0 || y>= config.BOARD_SIZE) continue;\r\n        // if its not in building mode and there is no tile, do not draw\r\n        if(!this.isBuilding && this.tiles[y][x] === -1) continue;\r\n        // create and add tile to the container\r\n        const tile = this.tiles[y][x] > -1 ? new PIXI.Sprite(this.blSheet.textures[this.tiles[y][x]+\".png\"]) : \r\n                                              new PIXI.Sprite(this.emptyTex);\r\n        let resTex = this.tSheet.textures[this.resources[y][x].img];\r\n        const resource = this.resources[y][x] !== -1 ? new PIXI.Sprite(resTex) : null;   \r\n        let dim =  config.TILESIZE*this.camera.zoom;  // current dimension of block sides\r\n        // tile properties                                  \r\n        tile.zIndex = y+x+2;\r\n        tile.x = (x-y)*(dim/2) + this.camera.x;\r\n        tile.y = (y+x)*(dim/4) + this.camera.y;\r\n        tile.alpha = this.tiles[y][x] > -1 ? 1 : 0.25;\r\n        tile.blendMode = PIXI.BLEND_MODES.NORMAL;\r\n        tile.width = dim+1*this.camera.zoom;\r\n        tile.height = dim+1*this.camera.zoom;\r\n        // resource properties (if it exists)\r\n        if(resource !== null) {\r\n          let mousePosition = this.app.renderer.plugins.interaction.mouse.global;\r\n          resource.anchor.set(0.5, 0);\r\n          resource.zIndex = y+x+3;\r\n          resource.x = (x-y)*(dim/2) + this.camera.x + (config.TILESIZE*this.camera.zoom)/2 + 0.5*this.camera.zoom;\r\n          resource.y = (y+x)*(dim/4) + this.camera.y - (resource.height*this.camera.zoom)/2 - dim/3 + 0.5*this.camera.zoom;\r\n          resource.width *= this.camera.zoom;\r\n          resource.height *= this.camera.zoom;\r\n          resource.blendMode = PIXI.BLEND_MODES.NORMAL;\r\n          resource.interactive = true;\r\n          let h = resTex.frame.height * this.camera.zoom;\r\n          let w = resTex.frame.width * this.camera.zoom;\r\n\r\n          // if this resource is currently colliding with mouse pos, set it as target\r\n          if(isPointInRect(resource.x - w/2 - this.camera.zoom, resource.y + (resource.height - h) - resource.height/8 + h/32,\r\n                             w, h - h/32, mousePosition.x, mousePosition.y))  {\r\n            isMouseOnResource = true;\r\n            this.target = {i: y, j: x}; // saves resource hit\r\n          }\r\n\r\n          this.container.addChild(resource);\r\n          // let g = new PIXI.Graphics();\r\n          // // set the line style to have a width of 5 and set the color to red\r\n          // g.lineStyle(1, 0xFF0000);\r\n          // g.zIndex = 1212121;\r\n          // // draw a rectangle\r\n          // g.drawRect(resource.x - w/2 - this.camera.zoom, resource.y + (resource.height - h) - resource.height/8 + h/32, w, h - h/32);\r\n          // this.container.addChild(g);\r\n        }\r\n        this.container.addChild(tile);\r\n      }\r\n    }\r\n\r\n    if(!isMouseOnResource) { // mouse not on any resource\r\n      this.target = -1; // reset target to represent no resource target\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Updates hover icons based on resource mouse is on\r\n   * @param {*} resource the resource to check if mouse is on\r\n   * @param {*} i the i index of resource in resource matrix\r\n   * @param {*} j the j index of resource in resource matrix\r\n   */\r\n  onResourceMouseOver(resource, i, j) {\r\n    if(this.isBuilding) // dont do nothing if its in building mode\r\n     return;\r\n    if(this.resources[i][j].id === 0) { // tree - only changes if it is still default cursor\r\n      if(document.body.style.cursor === 'default')\r\n        document.body.style.cursor =  'url('+CursorAxe+') 16 16,auto'; \r\n    }\r\n  }\r\n\r\n  /**\r\n   * Simply render the div that will contain the Pixi Renderer.\r\n   */\r\n  render() {\r\n    let component = this;\r\n    return (\r\n      <div ref={(thisDiv) => {component.gameCanvas = thisDiv}} />\r\n    );\r\n  }\r\n\r\n  // Resize the renderer when window resize happens\r\n  resize() {\r\n    // calculates delta in dimensions\r\n    let oldW = this.app.renderer.width;\r\n    let oldH = this.app.renderer.height;\r\n    let targetW = Math.round(window.innerWidth*0.70);\r\n    let targetH = Math.round(window.innerHeight*0.95);\r\n    let deltaW = targetW - oldW;\r\n    let deltaH = targetH - oldH;\r\n    // updates camera position\r\n    this.camera.x += deltaW/2;\r\n    this.camera.y += deltaH/2;\r\n    // resizes renderer\r\n    this.app.renderer.resize(targetW, targetH);\r\n    // resizes background\r\n    this.bgSprite.width = this.app.screen.width;\r\n    this.bgSprite.height = this.app.screen.height;\r\n    // resizes border\r\n    this.border.clear();\r\n    // set the line style to have a width of 5 and set the color to red\r\n    this.border.lineStyle(2, 0x000000);\r\n    this.border.drawRect(this.app.screen.x+1, this.app.screen.y+1, this.app.screen.width-1, this.app.screen.height-2);\r\n  }\r\n  \r\n}\r\n\r\n// function to find if given point\r\n// lies inside a given rectangle or not.\r\nfunction isPointInRect( x1,  y1,  w,  h,  x,  y) {\r\n  let x2 = x1 + w; let y2 = y1 + h;\r\n  if (x > x1 && x < x2 && y > y1 && y < y2)\r\n    return true;\r\n\r\n  return false;\r\n}","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAABnRSTlMAAAAAAABupgeRAAACvElEQVRIieWWT0/bQBDFn71jZ4OdKNQJYFU0jVQOhfbArZ+h37aXHnvnUnqCVomUqoE4FThJcYI3a3vdg60IRAKJoe2h77TSzs7vzewfrYanUN2mhk0tl7dcfubPPhyN5lP6kwDuET1y/VaFOGn7TevgpTWeRJ4vh1fxzYDHVsBJs0rMqRquY3KTCalkpG4GaIVTZ97ftqyanbeh3Q87g1mUpEGYzMOKV5B5r9mUAUZBPJokw0l8MzuK7UHdJgD7TcupGkA6nsRnl7I/lP4kvhtcBNCwCcDBS8t1zON2MAri/lC2B2Jh8HqAzHvL5QDGk0hI1e6Ho0my0HsRQOMGwPOlkLIzmA2XZ18VoGvghg5gs0IAhFQAxtN4KpIoSe9fuxKAG3rzmQngcM8G0PUEgC/fr+/3vgBQLjHG8pshIyUjlXmvlpnrmHPvfhABeND7AsDzbV6xjGzsXYjBpci8u475/p0D4NPnEYCjznSV1Jn++GOXN+TVC6tiGW+aZnUjR3Z7otsTmxU63LOFVJ4vAXw8Hq8L+BfPtRAIBdwGb+1yIVTXE1LBlwBw+LoG4Ph0jTr+VgXnPwVjs+TasDnbcsztuhnHCCbQNN11TWh6kxkA7BIABNMIQOfHSmcpB4SzBMD4Sotmaa1KRIhjxDGIwLmu67ppEoDNMgDMj/IagEx7u+WdmhklqedJy2IVm2kaAKRpKuUMAMql1VNnurUHdpnVbDKYJoRSKiUCYzlAKaWUWpxj9Qq+nYn+MCLSDdJt6ERGmqokSZiubZQIwGlPAPAuFj/9DwO+nocAdurcbfA6GBEplQNsTgBOegGAwWVRwK0JHWUDaaqVmCFkWsD7AwBDBycAGgwKZXzSC7Gm96UAGalgGo0CurjKZ/1fUXb2C2jpvyjbiWwcTKMVr9VdLW1RVkc2DkWyLOw/0G9N6DpE2GdL/AAAAABJRU5ErkJggg==\"","import React from 'react';\r\nimport config from './config.json'\r\nimport Camera from './camera.js';\r\nimport Resource from './resource.js';\r\nimport * as Vec2D from 'vector2d';\r\nimport treeData from './assets/trees/shadowSinglesSheet.json';\r\nimport { PixiComponent } from './pixicomponent.js';\r\nimport CursorAxe from './assets/cursors/axe.png'\r\nimport CursorAxeRotated from './assets/cursors/axe_rotated.png'\r\n\r\n/**\r\n * Building block data\r\n */\r\nclass BuildBlock {\r\n  x = 0; // the x position of building block;\r\n  y = 0; // the y position of building block;\r\n  placeI = null; // matrix index I to build block\r\n  placeJ = null; // matrix index J to build block\r\n  zIndex = 2147483646; // the z-index of building block\r\n}\r\n\r\n/**\r\n * The component for the game board/map\r\n * responsible for operations related to the tilemap\r\n */\r\nclass Board extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      tiles: this.props.data.tiles, // tiles loaded (empty if no save)\r\n      treeSpots: this.props.data.treeSpots, // tree spots loaded (empty if no save)\r\n      resources: this.props.data.resources, // resources loaded (empty if no save)\r\n      vault: this.props.data.vault, // vault that represents player resources\r\n      x: 0, // mouse current X position\r\n      y: 0, // mouse current Y position\r\n      camera: new Camera(), // creates board camera\r\n      block: new BuildBlock(), // building block data\r\n      isMouseDown: false, // is a mouse button currently down\r\n      isDragging: false, // is the user currently dragging\r\n      lastX: 0,\r\n      lastY: 0,\r\n      lastDragX: 0,\r\n      lastDragY: 0,\r\n      lastClick: 0,\r\n    };\r\n\r\n    // if its a new board, load initial disposition of blocks\r\n    if (this.props.isNewBoard)\r\n      this.loadEmpty();\r\n\r\n    //centers camera\r\n    let center = this.getBoardCenter()\r\n    this.state.camera.x = center.x;\r\n    this.state.camera.y = center.y;\r\n  }\r\n\r\n  // load initial game for no save loads\r\n  loadEmpty() {\r\n    const tiles = this.state.tiles.slice();\r\n    const resources = this.state.resources.slice();\r\n    let i, j; i = j = Math.floor(config.BOARD_SIZE / 2);\r\n    tiles[i][j] = 0; \r\n    resources[i][j] = new Resource({i: i, j: j, id: 0, img: \"0_3.png\", birth: performance.now(), life: 10, maxLife: 10});\r\n    //this.addSpot(this.state.treeSpots, i, j)\r\n  }\r\n\r\n  // adds a spot i,j into a spotlist\r\n  addSpot(spotList, i, j) {\r\n    spotList.push(i+\"_\"+j);\r\n  }\r\n\r\n  // receives a spot in string format and returns the [i,j] equivalent\r\n  evalSpot(spot) {\r\n    let idxs = spot.split(\"_\");\r\n    return {i: idxs[0], j: idxs[1]};\r\n  }\r\n  \r\n  // resets a spot list\r\n  resetSpotList(spotList) {\r\n    spotList.length = 0;  \r\n  }\r\n\r\n  // respawn resources (called in a timer with a preset interval)\r\n  respawn() {\r\n    const treeSpots = this.state.treeSpots.slice();\r\n    const resources = this.state.resources.slice();\r\n    // chance of spawning tree\r\n    let treeChance = treeData[\"frames\"][\"0_3.png\"][\"chance\"];\r\n    let globalChance = 1 - (1-treeChance)**treeSpots.length; // calculates the chance of n (treeSpots.length) tries to spawn\r\n    if(Math.random() < globalChance) { // tries to spawn a tree if a slot is available \r\n      if(this.state.treeSpots.length > 0) {\r\n        let s =  Math.round(Math.random() * treeSpots.length); // select a random available spot\r\n        if (s < 0) s = 0; if (s >= treeSpots.length) s = treeSpots.length-1; // border patrol\r\n        let spot = this.evalSpot(treeSpots[s]); // eval spot from string default format\r\n        resources[spot.i][spot.j] = new Resource({i: spot.i, j: spot.j, id: 0, img: \"0_2.png\", birth: performance.now(), life: 5, maxLife: 10}); // add tree to spot randomized\r\n        treeSpots.splice(s, 1); // removes from available tree spots as it is occupied now\r\n        this.setState({treeSpots: treeSpots, resources: resources}); // updates state with modified data\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Returns a Vec2D with the coordinates to center isometric map with camera at 0\r\n   */\r\n  getBoardCenter() {\r\n    let j = config.BOARD_SIZE;\r\n    let i = config.BOARD_SIZE;\r\n    return new Vec2D.Vector(window.innerWidth * 0.70 / 2 - config.TILESIZE * this.state.camera.zoom / 2\r\n      - (j - i) * (config.TILESIZE * this.state.camera.zoom / 2) / 2,\r\n      window.innerHeight * 0.95 / 2 - (i + j) * (config.TILESIZE * this.state.camera.zoom / 4) / 2);\r\n  }\r\n\r\n  /**\r\n   * Position camera in order to position isometric tilemap \r\n   * in the center of the screen \r\n   */\r\n  center() {\r\n    let j = this.state.tiles[0].length;\r\n    let i = this.state.tiles.length;\r\n    let center = new Vec2D.Vector(window.innerWidth * 0.70 / 2 - config.TILESIZE * this.state.camera.zoom / 2\r\n      - (j - i) * (config.TILESIZE * this.state.camera.zoom / 2) / 2,\r\n      window.innerHeight * 0.95 / 2 - (i + j) * (config.TILESIZE * this.state.camera.zoom / 4) / 2)\r\n    const camera = Object.assign({}, this.state.camera);\r\n    camera.x = center.x;\r\n    camera.y = center.y;\r\n    this.setState({ camera: camera });\r\n  }\r\n\r\n  /**\r\n   * Get center coordinates of the isometric map current position\r\n   */\r\n  getCenter() {\r\n    let j = this.state.tiles[0].length;\r\n    let i = this.state.tiles.length;\r\n    let offX = (j - i) * (config.TILESIZE * this.state.camera.zoom / 2) / 2;\r\n    let offY = (i + j) * (config.TILESIZE * this.state.camera.zoom / 4) / 2;\r\n    return new Vec2D.Vector(this.state.camera.x + offX + config.TILESIZE * this.state.camera.zoom / 2,\r\n      this.state.camera.y + offY);\r\n  }\r\n\r\n\r\n  /**\r\n   * Handles mouse up and down events\r\n   * @param {Event} event the event that fired this callback\r\n   * @param {Object} target target resource (i,j) if any, or -1 if mouse is not on any resource\r\n   */\r\n  handleMouseClick = (event, target) => {\r\n    event.stopPropagation();\r\n    let eX = event.data.global.x; let eY = event.data.global.y;\r\n    let isBuilding = this.props.selectedBlock > -1 ? true : false;\r\n\r\n    // if its not in building mode and if click targets a resource, handle resource click event\r\n    if(target !== -1 && !isBuilding) {\r\n      this.handleResourceEvent(event, target);\r\n    } else {\r\n      document.body.style.cursor =  'default';  // reset to default cursor if not on resource\r\n    }\r\n\r\n    if (event.type === \"pointerdown\") {\r\n      // saves the position last clicked for drag event and update states\r\n      this.setState({ isMouseDown: true, lastX: eX, lastY: eY, lastDragX: eX, lastDragY: eY });\r\n    } else {\r\n      if (this.state.isMouseDown) { // click happened\r\n        let t = performance.now(); // for double click\r\n        let dT = t - this.state.lastClick;\r\n        this.setState({ isMouseDown: false , lastClick: t});\r\n        if(dT < 180) // double click if click happens to close to last one\r\n          this.handleDoubleClick(event)\r\n        else // normal click\r\n          this.handleClick(event, event.data.global.x, event.data.global.y);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * handles double click events\r\n   * @param {Event} event the event that triggered the double click\r\n   */\r\n  handleDoubleClick(event) {\r\n    // double click with left mouse -> center map\r\n    if(event.data.button === 2)\r\n      this.center();\r\n    else // handles left click normally\r\n      this.handleClick(event, event.data.global.x, event.data.global.y);\r\n  }\r\n\r\n  /**\r\n   * Handles events that are fired on interactions with resources\r\n   * \r\n   * @param {Event} e the event that triggered the resource handler \r\n   * @param {Object} target target resource (i,j) if any, or -1 if mouse is not on any resource\r\n   */\r\n  handleResourceEvent(e, target) {\r\n    let resourceHit = this.state.resources[target.i][target.j]; // the resource that fired the event\r\n\r\n    if(e.data.button === 2) return; // do nothing if left click triggered resource event\r\n\r\n    if (e.type === \"pointerdown\") { // mouse down triggered the event\r\n      // updates mouse cursor based on resource clicked\r\n      switch(resourceHit.id) {\r\n        case 0: // tree\r\n          document.body.style.cursor = 'url('+CursorAxeRotated+') 8 8,auto'; \r\n          break;\r\n        default:\r\n          document.body.style.cursor =  'default';\r\n          console.log(\"Unknown resource clicked down\"); \r\n          break;\r\n      }\r\n    } else if (e.type === \"pointerup\") { // mouse up triggered the event\r\n      if(this.lastEvent !== undefined && this.lastEvent === \"pointerdown\") { // only do something if it was a full click\r\n        // updates based on resource clicked\r\n        switch(resourceHit.id) {\r\n          case 0: // tree\r\n            document.body.style.cursor = 'url('+CursorAxe+') 8 8,auto';  // updates mouse cursor\r\n            const resources = this.state.resources.slice();\r\n            resourceHit.life--;\r\n            let percent = resourceHit.life / resourceHit.maxLife;\r\n            let img_id = Math.floor(percent*100 / 25);\r\n            \r\n            if(resourceHit.life>0) {\r\n              resourceHit.img = resourceHit.id+\"_\"+img_id+\".png\";\r\n              resources[resourceHit.i][resourceHit.j] = resourceHit;\r\n            }\r\n            else\r\n              resources[resourceHit.i][resourceHit.j] = -1;\r\n\r\n            this.setState({resources:resources});\r\n            break;\r\n          default:\r\n            document.body.style.cursor =  'default';\r\n            console.log(\"Unknown resource clicked down\"); \r\n            break;\r\n        }\r\n      } \r\n    } else if (e.type === \"pointermove\") { // mouse move triggered the event\r\n        switch(resourceHit.id) {\r\n          case 0: // tree\r\n            document.body.style.cursor = 'url('+CursorAxe+') 8 8,auto'; \r\n            break;\r\n          default:\r\n            console.log(\"Unknown resource clicked down\"); \r\n            document.body.style.cursor =  'default';\r\n            break;\r\n        }\r\n    }\r\n    // updates last event\r\n    this.lastEvent = e === undefined ? undefined : e.type;\r\n  }\r\n\r\n  /**\r\n   * Handles mouse movements events\r\n   * @param {Event} e the event data\r\n   * @param {Object} target target resource (i,j) if any, or -1 if mouse is not on any resource\r\n   */\r\n  onMouseMove(e, target) {\r\n    e.stopPropagation();\r\n    //e.preventDefault();\r\n\r\n    let eX = e.data.global.x; let eY = e.data.global.y;\r\n    this.setState({ x: eX, y: eY });\r\n    let isBuilding = this.props.selectedBlock > -1 ? true : false;\r\n\r\n    // if event has a target resource send it to the handler of resource event\r\n    if(target !== -1 && !isBuilding) {\r\n      this.handleResourceEvent(e, target);\r\n    } else {\r\n      document.body.style.cursor =  'default';  // reset to default cursor if not on resource\r\n    }\r\n\r\n    if (this.state.isMouseDown) {\r\n      // calculates drag direction \r\n      const mousePos = new Vec2D.Vector(e.data.global.x, e.data.global.y);\r\n      const lastDrag = new Vec2D.Vector(this.state.lastDragX, this.state.lastDragY);\r\n      this.setState({ isDragging: true, lastDragX: eX, lastDragY: eY });\r\n      const offset = mousePos.subtract(lastDrag)\r\n      // drag event\r\n      if (e.data.buttons === 2) {\r\n        // adjusts camera accordingly\r\n        this.updateCamera(offset)\r\n      } else if (e.data.buttons === 1) { // if it is left click\r\n        if (isBuilding) // if it is building\r\n          this.placeBlock(); // delegate block placement to the method responsible for it\r\n      }\r\n    } else { // not dragging\r\n      this.setState({ isDragging: false });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Updates camera's current position\r\n   * @param {offset to be added to the camera's current position} offset \r\n   */\r\n  updateCamera(offset) {\r\n    const camera = Object.assign({}, this.state.camera);\r\n    camera.x += offset.x;\r\n    camera.y += offset.y;\r\n    this.setState({ camera: camera });\r\n  }\r\n\r\n  /**\r\n   * Rotates board in the desired direction orientation\r\n   */\r\n  rotate(direction) {\r\n    const matrix = this.state.tiles;\r\n    const resMatrix = this.state.resources;\r\n    const oldCenterX = this.getCenter(matrix[0]).x;\r\n    this.resetSpotList(this.state.treeSpots); // resets spot list of trees (will be rebuilt with new positions)\r\n    const rows = matrix.length, cols = matrix[0].length;\r\n    const grid = [];\r\n    const resGrid = [];\r\n    for (let j = 0; j < cols; j++) {\r\n      grid[j] = Array(rows);\r\n      resGrid[j] = Array(rows);\r\n    }\r\n    for (let i = 0; i < rows; i++) {\r\n      for (let j = 0; j < cols; j++) {\r\n        let dirI = direction === \"clockwise\" ? rows-i-1 : i; \r\n        let dirJ = direction === \"clockwise\" ? j : cols-j-1;\r\n        grid[j][i] = matrix[dirI][dirJ];\r\n        resGrid[j][i] = resMatrix[dirI][dirJ];\r\n        if(resGrid[j][i] !== -1) { // updates resource position if there is any\r\n          resGrid[j][i].i = j; \r\n          resGrid[j][i].j = i;\r\n        }\r\n        // rebuilds spot lists\r\n        switch(grid[j][i]) {\r\n          case 0: // grass -> tree spot\r\n            this.addSpot(this.state.treeSpots, j, i);\r\n            break;\r\n          default: // type that does not need to be in an aux list, only visual block\r\n            break;\r\n        }\r\n      }\r\n    }\r\n    const xOffset = this.getCenter(grid).x - oldCenterX;\r\n    const camera = Object.assign({}, this.state.camera); \r\n    camera.x -= xOffset;\r\n    this.setState({tiles: grid, resources: resGrid, camera:camera});  \r\n  }\r\n\r\n  /**\r\n   * Handles click interactions\r\n   * @param {e} e the event that triggered the click callback\r\n   */\r\n  handleClick(e) {\r\n    let isBuilding = this.props.selectedBlock > -1 ? true : false;\r\n\r\n    if (isBuilding && e.data.button === 0) { // is in building mode (able to place blocks)\r\n      this.placeBlock();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Raycasts a (x,y) position to scan for resource hits.\r\n   * Only considers the top plane of a cube as a hit area for any resource.\r\n   * @param {*} x the x position of mouse to raycast\r\n   * @param {*} y the y position of mouse to raycast\r\n   * @returns returns the resource hit, or -1 if no resources are hit\r\n   */\r\n  raycast(x, y) {\r\n    var idx = this.convertToMap(x, y);\r\n    var i = Math.floor(idx[0]);\r\n    var j = Math.floor(idx[1]);\r\n\r\n    // if it hits some existing block\r\n    if (this.state.tiles[i][j] !== -1) {\r\n      // precision calculation to consider only the top plane of cube\r\n      let topFactor = this.getTopFactor(i, j, x, y);\r\n      // Hit on a valid cube plane!!! Success!!!!!\r\n      if (topFactor > 0 && topFactor <= 1) {\r\n        // return the resource on top of cube plane hit (-1 if no resources are in the cube)\r\n        return this.state.resources[i][j]; \r\n      }\r\n    }\r\n    // no cube hit or no top plane of a cube, return -1;\r\n    return -1;\r\n  }\r\n\r\n  /**\r\n   * Converts coordinates in the screen space (X,Y) of the page\r\n   * to the map coordinates (i,j)\r\n   * @param {The x - the x coordinate to be converted to map index j } screenX \r\n   * @param {The y - the y coordinate to be converted to map index i } screenY \r\n   * @param {*} limit if calculations should be limited by board boundaries (default = true)\r\n   */\r\n  convertToMap(screenX, screenY, limit = true) {\r\n    let TILESIZE_Z = config.TILESIZE * this.state.camera.zoom;\r\n    let TILE_HALF = TILESIZE_Z / 2;\r\n\r\n    let x = screenX - TILE_HALF - this.state.camera.x;\r\n    let y = screenY - this.state.camera.y;\r\n    let i = Math.trunc((y / TILE_HALF) - (x / TILESIZE_Z));\r\n    let j = Math.trunc((y / TILE_HALF) + (x / TILESIZE_Z));\r\n\r\n    // limits i and j to be inside board boundaries\r\n    if (limit) {\r\n      // makes sure we do not surpass the map 2darray limits\r\n      if (i < 0) i = 0; if (i >= this.state.tiles.length) i = this.state.tiles.length - 1;\r\n      if (j < 0) j = 0; if (j >= this.state.tiles[0].length) j = this.state.tiles[0].length - 1;\r\n    }\r\n\r\n    return [i, j];\r\n  }\r\n\r\n  /**\r\n   * Returns a value that indicates if a point is within\r\n   * the top plane of a given tile in the map\r\n   * (the factor indicates it is in top plane when its value is between 0 and 1)\r\n   * @param {*} i the i-index of the tile to be checked\r\n   * @param {*} j the j-index of the tile to be checked\r\n   * @param {*} screenX the x-index of the mouse click in the page\r\n   * @param {*} screenY the y-index of the mouse click in the page\r\n   * @returns factor that indicates if click is in top plane when its value is between 0 and 1 \r\n   *          or out of the top plane when it is not\r\n   */\r\n  getTopFactor(i, j, screenX, screenY) {\r\n    /**\r\n    * tx,ty: coordinates of the tile in page (top-left orientation)\r\n    * tcx,tcy: coordinates of the middle of the tile\r\n    * cx, cy: coordinates of the click in the page\r\n    * offsetX,Y: offset relation between click and middle of the tile\r\n    * topFactor: factor from that indicates when click is on the top plane of cube (from 0 to 1 = click in top plane)\r\n    */\r\n    let tx = (j - i) * (config.TILESIZE * this.state.camera.zoom / 2) + this.state.camera.x;\r\n    let ty = (i + j) * (config.TILESIZE * this.state.camera.zoom / 4) + this.state.camera.y;\r\n    let cx = screenX;\r\n    let cy = screenY;\r\n    let tcy = ty + (config.TILESIZE * this.state.camera.zoom / 4);\r\n    let tcx = tx + (config.TILESIZE * this.state.camera.zoom / 2);\r\n    let offsetY = Math.abs(cy - tcy) * 2;\r\n    let offsetX = Math.abs(cx - tcx);\r\n    return (offsetX + offsetY) / ((config.TILESIZE * this.state.camera.zoom / 4) + (config.TILESIZE * this.state.camera.zoom / 4));\r\n  }\r\n\r\n  // renders projection ofselected tile on tilemap on mouse move position\r\n  // and updates placement position valid candidates in case of user click\r\n  updateProjection() {\r\n    const tiles = this.state.tiles.slice();\r\n    const mX = this.state.x;\r\n    const mY = this.state.y;\r\n    var top = mY - this.state.camera.zoom * config.TILESIZE / 4;\r\n    var left = mX - this.state.camera.zoom * config.TILESIZE / 2;\r\n    // placement position (null if not valid)\r\n    var placeI = null; var placeJ = null; var zIndex = 2147483646;\r\n\r\n    var idx = this.convertToMap(this.state.x, this.state.y);\r\n    var i = Math.floor(idx[0]);\r\n    var j = Math.floor(idx[1]);\r\n\r\n    // precision calculation\r\n    let topFactor = this.getTopFactor(i, j, this.state.x, this.state.y);\r\n\r\n    if (tiles[i][j] !== -1) {  // borders of board\r\n      if (topFactor >= 1 && topFactor <= 3) { // is within acceptable distance of border and has neighbour\r\n        idx = this.convertToMap(this.state.x, this.state.y, false); // gets position \r\n        i = Math.floor(idx[0]);\r\n        j = Math.floor(idx[1]);\r\n        const oldI = i; const oldJ = j; // stores preprojection pos with limit at 0\r\n\r\n        if (1 / i === -Infinity) i--; // correction to project with i < 0\r\n        if (1 / j === -Infinity) j--; // correction to project with j < 0\r\n\r\n        if (!this.isAtCorner(i, j)) {\r\n          top = (i + j) * (config.TILESIZE * this.state.camera.zoom / 4) + this.state.camera.y\r\n          left = (j - i) * (config.TILESIZE * this.state.camera.zoom / 2) + this.state.camera.x\r\n          placeI = oldI; placeJ = oldJ; // updates placement indexes with a valid placement position\r\n          zIndex = i + j + 2;\r\n        }\r\n      }\r\n    } else { // empty slot is a valid position if there is a neighbour tile\r\n      const hasNeighbour = this.hasNeighbour(i, j);\r\n\r\n      // if is within the projected top plane of cube to be placed and has a neighbour\r\n      if (topFactor > 0 && topFactor <= 1 && hasNeighbour) {\r\n        //console.log(\"Im a valid poisition to place block\");\r\n        top = (i + j) * (config.TILESIZE * this.state.camera.zoom / 4) + this.state.camera.y\r\n        left = (j - i) * (config.TILESIZE * this.state.camera.zoom / 2) + this.state.camera.x\r\n        placeI = i; placeJ = j; // updates placement indexes with a valid placement position\r\n        zIndex = i + j + 2;\r\n      }\r\n    }\r\n\r\n    // updates block data\r\n    const block = Object.assign({}, this.state.block);\r\n    block.placeI = placeI; block.placeJ = placeJ;\r\n    block.x = left; block.y = top; block.zIndex = zIndex;\r\n    this.setState({block:block});\r\n    return block;\r\n  }\r\n\r\n  /**\r\n   * Return if a tile in a given position (i,j) has a valid neighbour (value != 0)\r\n   * @param {*} i the i-index of the tile to check neighbours\r\n   * @param {*} j the j-index of the tile to check neighbours\r\n   */\r\n  hasNeighbour(i, j) {\r\n    const tiles = this.state.tiles.slice();\r\n    const left = j - 1 >= 0 ? (tiles[i][j - 1] !== -1 ? true : false) : false;\r\n    const right = j + 1 < tiles[i].length ? (tiles[i][j + 1] !== -1 ? true : false) : false;\r\n    const up = i - 1 >= 0 ? (tiles[i - 1][j] !== -1 ? true : false) : false;\r\n    const down = i + 1 < tiles.length ? (tiles[i + 1][j] !== -1 ? true : false) : false;\r\n    return left || right || up || down;\r\n  }\r\n\r\n  /**\r\n   * Check if it is at the corner of board (outside tiles that are attached to one of the four board corners)\r\n   * @param {*} i the i-index of the tile to check if it is at board boundaries corner\r\n   * @param {*} j the j-index of the tile to check if it is at board boundaries corner\r\n   */\r\n  isAtCorner(i, j) {\r\n    const tiles = this.state.tiles.slice();\r\n    const upLeft = j === -1 ? (i === -1 ? true : false) : false;\r\n    const upRight = j === tiles[0].length ? (i === -1 ? true : false) : false;\r\n    const downLeft = j === -1 ? (i === tiles.length ? true : false) : false;\r\n    const downRight = j === tiles[0].length ? (i === tiles.length ? true : false) : false;\r\n    return upLeft || upRight || downLeft || downRight;\r\n  }\r\n\r\n  /**\r\n   * Place block in the stored placement position\r\n   */\r\n  placeBlock() {\r\n    let i = this.state.block.placeI; let j = this.state.block.placeJ;\r\n    let valid = i != null ? (j != null ? (i >= 0 ? (j >= 0 ? (i < config.BOARD_SIZE ?\r\n      (j < config.BOARD_SIZE ? true : false) : false)\r\n      : false) : false) : false) : false;\r\n    if (valid) { // has a valid place to place block\r\n      const tiles = this.state.tiles.slice();\r\n      tiles[i][j] = this.props.selectedBlock;\r\n      // add to the aux list of spots based o tile type\r\n      switch(this.props.selectedBlock) {\r\n        case 0: // grass -> tree spot\r\n          this.addSpot(this.state.treeSpots, i, j);\r\n          break;\r\n        default: // type that does not need to be in an aux list, only visual block\r\n          break;\r\n      }\r\n      this.setState({ tiles: tiles });\r\n    }\r\n  }\r\n\r\n  // change zoom based on mwheel\r\n  onWheel(e) {\r\n    let scroll = -e.deltaY / 3200;\r\n\r\n    if ((this.state.camera.zoom + scroll) > this.state.camera.min_zoom &&\r\n      (this.state.camera.zoom + scroll) <= this.state.camera.max_zoom) {\r\n      const camera = Object.assign({}, this.state.camera);\r\n      const oldZoom = camera.zoom;\r\n      camera.zoom += scroll;\r\n      const newZoom = camera.zoom;\r\n      const oldHeight = config.TILESIZE * config.BOARD_SIZE * oldZoom;\r\n      const newHeight = config.TILESIZE * config.BOARD_SIZE * newZoom;\r\n      const dH = newHeight - oldHeight;\r\n      camera.y = camera.y - dH / 4;\r\n      this.setState({ camera: camera });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <div className='game-board'> \r\n          <PixiComponent onMouseDown={this.handleMouseClick}\r\n            onMouseUp={this.handleMouseClick}\r\n            onMouseMove={this.onMouseMove.bind(this)}\r\n            onWheel={this.onWheel.bind(this)}\r\n            onResourceEvent={this.handleResourceEvent.bind(this)}\r\n            onRotateAntiBtn={() => this.rotate(\"anticlockwise\")}\r\n            onCenterBtn={this.center.bind(this)}\r\n            onRotateBtn={() => this.rotate(\"clockwise\")}\r\n            updateProjection={this.updateProjection.bind(this)}\r\n            state={this.state}\r\n            selectedBlock={this.props.selectedBlock}\r\n            blocksSheet={this.props.blocksSheet} blocksData={this.props.blocksData}/>\r\n        </div>\r\n        {/* <button className=\"rotate-button\" onClick={() => this.rotate(\"anticlockwise\")}>Anti-clockwise</button>\r\n        <button className=\"rotate-button\" onClick={() => this.rotate(\"clockwise\")}>Clockwise</button>\r\n        <button className=\"center-button\" onClick={() => this.center()}>Center</button> */}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Called when component is mounted\r\n   */\r\n  componentDidMount() {\r\n    window.addEventListener('resize', this.resize);\r\n    window.addEventListener('mousedown', (e) => e.preventDefault());\r\n    this.forceUpdate();\r\n    // starts respawn timer\r\n    this.respawnTimer = setInterval(this.respawn.bind(this), 1000);\r\n    //this.loadTiles(); // load initial tiles\r\n  }\r\n\r\n  /**\r\n   * Called when component is unmounted\r\n   */\r\n  componentWillUnmount() {\r\n    window.removeEventListener('resize', this.resize);\r\n    window.removeEventListener('mousedown', (e) => e.preventDefault());\r\n    clearInterval(this.respawnTimer);\r\n  }\r\n}\r\n\r\nexport default Board;","/**\r\n * Worker listener for loading tasks\r\n */\r\nconst workercode = () => {\r\n    onmessage = function (e) {\r\n        /**\r\n         * Creates a new game board represented by a 2d array\r\n         * @param rows The number of rows for the array\r\n         * @param columns The number of columns for the array\r\n         * @param defaultValue The default value for each field (0 for empty)\r\n         * @returns The newly created multidimensional array populated with the initial disposition of the board\r\n         */\r\n        if (e.data.cmd === \"loadNewGame\") {\r\n            // progress\r\n            var PROGRESS_BOARD_LOAD = 0;\r\n            // get params\r\n            const rows = e.data.rows; const columns = e.data.columns; const defaultValue = e.data.defaultValue;\r\n            // creates game tile and resource array as one dimension for faster message transfer\r\n            const tiles = new Int8Array(rows*columns);\r\n            const resources = [];\r\n            // count for the progress calculation\r\n            var count = 0;\r\n\r\n            // fills array with default value\r\n            for (let i = 0; i < rows; i++) {\r\n                for (let j = 0; j < columns; j++) {\r\n                    tiles[count] = defaultValue;\r\n                    resources[count] = -1;//new Resource({i: i, j: j, id: 0, img: \"0_3.png\", birth: performance.now(), life: 10, maxLife: 10});\r\n                    // updates count\r\n                    count++;\r\n                    // send message to main UI thread in case progress changes\r\n                    let cProgress =  Math.round(100 * (count / (rows * columns)));\r\n                    if(cProgress !== PROGRESS_BOARD_LOAD)\r\n                        self.postMessage({'cmd': 'updateProgress', 'progress' : cProgress}); // eslint-disable-line no-restricted-globals\r\n                    // updates loading progress\r\n                    PROGRESS_BOARD_LOAD = cProgress;\r\n                }\r\n            }\r\n            // send the newly created game\r\n            self.postMessage({cmd:'loadNewComplete', tiles: tiles.buffer, resources: JSON.stringify(resources)},  // eslint-disable-line no-restricted-globals\r\n                                [tiles.buffer]); // eslint-disable-line no-restricted-globals\r\n            //self.postMessage(tiles.buffer, [tiles.buffer]); // eslint-disable-line no-restricted-globals\r\n        }\r\n    };\r\n    // class Resource {\r\n    //     i = -1;  // current i position of resource\r\n    //     j = -1; // current j position of resource\r\n    //     id = -1; // id of resource\r\n    //     img = null; // image name of resource\r\n    //     birth = -1; // the timestamp of the birth of this resource\r\n    //     life = -1; // the current life of this resource (depleted when <= 0)\r\n    //     maxLife = -1; // the max life of resource\r\n    \r\n    //     // constructor just sets the values received in params\r\n    //     constructor(params = {i:-1, j:-1, id:-1, img:null, birth:-1, life:-1, maxLife:-1}) {\r\n    //         this.i = params.i; this.j = params.j; this.id = params.id; this.maxLife = params.maxLife;\r\n    //         this.img = params.img; this.birth = params.birth; this.life = params.life;\r\n    //     }\r\n    \r\n    //     // sets whole data set of resource\r\n    //     set(params = {i:-1, j:-1, id:-1, img:null, birth:-1, life:-1, maxLife:-1}) {\r\n    //         this.i = params.i; this.j = params.j; this.id = params.id; this.maxLife = params.maxLife;\r\n    //         this.img = params.img; this.birth = params.birth; this.life = params.life;\r\n    //     }\r\n    //  }\r\n};\r\n\r\nlet code = workercode.toString();\r\ncode = code.substring(code.indexOf(\"{\") + 1, code.lastIndexOf(\"}\"));\r\n\r\nconst blob = new Blob([code], { type: \"application/javascript\" });\r\nconst worker_script = URL.createObjectURL(blob);\r\n\r\nexport function getWorkerScript() { return worker_script }\r\n\r\n\r\n// returns board creation progress\r\n//export function getProgressBoardLoad() { return PROGRESS_BOARD_LOAD; }","export default __webpack_public_path__ + \"static/media/sheet.6889c4f5.png\";","import React from 'react';\r\n\r\nconst Sprite = ({ filename, x, y, width, height, scaleX, scaleY }) => {\r\n  if (!filename) {\r\n    return null;\r\n  }\r\n\r\n  const style = {\r\n    backgroundImage: `url(${filename})`,\r\n    backgroundPosition: `${x * (-1)}px ${y * (-1)}px`,\r\n    backgroundRepeat: 'no-repeat',\r\n    width,\r\n    height,\r\n    transformOrigin: '0% 0%',\r\n    transform: `scale(${scaleX}, ${scaleY})`,\r\n  };\r\n\r\n  return <div style={style} />;\r\n};\r\n\r\nSprite.defaultProps = {\r\n  x: 0,\r\n  y: 0,\r\n  width: 0,\r\n  height: 0,\r\n  scaleX: 1,\r\n  scaleY: 1,\r\n};\r\n\r\nexport default Sprite;","import React from 'react';\r\n\r\nimport Sprite from './sprite.js';\r\n\r\nconst SpriteSheet = ({ filename, data, sprite, scaleX, scaleY }) => {\r\n  if (!filename || !data || !sprite) {\r\n    return null;\r\n  }\r\n\r\n  const spriteData = data[\"frames\"][sprite][\"frame\"];\r\n\r\n  return <Sprite filename={filename} x={spriteData[\"x\"]} y={spriteData[\"y\"]} width={spriteData[\"w\"]} height={spriteData[\"h\"]}\r\n                            scaleX = {scaleX} scaleY = {scaleY} />;\r\n};\r\n\r\nSpriteSheet.defaultProps = {\r\n    scaleX: 1,\r\n    scaleY: 1,\r\n  };\r\n\r\nexport default SpriteSheet;","/**\r\n * Vault class for player resources storage\r\n */\r\n export default class Vault {\r\n    wood = 0;  // current wood count the player has\r\n    ore = 0; // current ore count the player has\r\n    food = 0; // current food count the player has\r\n    money = 0; // current money count the player has\r\n    // constructor just sets the values received in params\r\n    constructor(wood = 0, ore = 0, food = 0, money = 0) {\r\n        this.wood = wood; this.ore = ore; this.food = food; this.money = money;\r\n    }\r\n }","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport Board from './board.js';\r\nimport Config from './config.json';\r\nimport * as Load from './load.js';\r\nimport {FpsView} from \"react-fps\";\r\nimport Accordion from '@mui/material/Accordion';\r\nimport AccordionDetails from '@mui/material/AccordionDetails';\r\nimport AccordionSummary from '@mui/material/AccordionSummary';\r\nimport Typography from '@mui/material/Typography';\r\nimport ExpandMoreIcon from '@mui/icons-material/ExpandMore';\r\nimport Box from '@mui/material/Box';\r\nimport Card from '@mui/material/Card';\r\nimport CardContent from '@mui/material/CardContent';\r\nimport IconButton from '@mui/material/IconButton';\r\nimport BuyIcon from '@mui/icons-material/ShoppingCart';\r\nimport CancelIcon from '@mui/icons-material/Cancel';\r\nimport blocksSheet from './assets/blocks/sheet.png';\r\nimport blocksData from './assets/blocks/sheet.json';\r\nimport List from 'react-virtualized/dist/commonjs/List';\r\nimport AutoSizer from 'react-virtualized/dist/commonjs/AutoSizer';\r\nimport SpriteSheet from './spritesheet.js';\r\nimport Vault from './vault.js'\r\n\r\nexport const STATE_LOADING = 1;\r\nexport const STATE_RUNNING = 2;\r\n\r\nclass Game extends React.Component {\r\n  \r\n  constructor(props) {\r\n    super(props);\r\n    document.body.style.overflow = 'hidden';\r\n    window.addEventListener(\"contextmenu\", e => e.preventDefault());\r\n    this.state = {\r\n      loadProgress: 0,\r\n      selectedBlock: -1,\r\n      loadText: \"Loading game...\",\r\n      current: STATE_LOADING,\r\n      data: {\r\n        tiles: null,\r\n        treeSpots: null,\r\n        resources: null,\r\n        vault: null,\r\n      },\r\n      isNewBoard: true\r\n    }\r\n  }\r\n  \r\n  // load game components on mount\r\n  componentDidMount () {\r\n    this.loadBoard();\r\n\r\n    this.list = Array(Object.keys(blocksData[\"frames\"]).length).fill().map((val, idx) => {\r\n      return {\r\n        id: idx, \r\n        name: 'John Doe',\r\n        image: 'http://via.placeholder.com/40',\r\n        text: 'loremIpsum',\r\n      }\r\n    });\r\n  }\r\n\r\n  // transform an array into a 2d array/matrix\r\n  matrixify (arr, rows, cols) {\r\n    var matrix = [];\r\n    if (rows * cols === arr.length) {\r\n        for(var i = 0; i < arr.length; i+= cols) {\r\n            matrix.push(arr.slice(i, cols + i));\r\n        }\r\n    }\r\n\r\n    return matrix;\r\n};\r\n  \r\n  /**\r\n   * Loads game board by creating a worker to do the job\r\n   * while update UI until receiving the finished data\r\n   */\r\n  loadBoard() {\r\n    if (window.Worker) {\r\n      // creates worker\r\n      this.boardWorker = new Worker(Load.getWorkerScript());\r\n      // send load new game message\r\n      this.boardWorker.postMessage({'cmd': 'loadNewGame', 'rows': Config.BOARD_SIZE, 'columns': Config.BOARD_SIZE, 'defaultValue': -1});\r\n      this.boardWorker.onmessage = e => {\r\n        if(e.data.cmd === \"updateProgress\") // update load progress\r\n          this.setState({loadProgress: e.data.progress});\r\n        else if(e.data.cmd === \"loadNewComplete\"){ // new game loaded\r\n          const tiles = new Int8Array(e.data.tiles); // gets tiles as an int8Array to be converted to a matrix and stored\r\n          let data = Object.assign({}, this.state.data); // stores loaded data and create remaining data for new game\r\n          data.tiles = this.matrixify(tiles, Config.BOARD_SIZE, Config.BOARD_SIZE);\r\n          data.resources = this.matrixify(JSON.parse(e.data.resources), Config.BOARD_SIZE, Config.BOARD_SIZE);\r\n          data.treeSpots = [];\r\n          data.vault = new Vault();\r\n          this.setState({data: data, current:STATE_RUNNING});\r\n        }\r\n      };\r\n\r\n    }\r\n\r\n\r\n   // while(true) console.log(Load.getProgressBoardLoad());\r\n    //this.setState({current:STATE_RUNNING, tiles:tiles});\r\n  }\r\n\r\n  /**\r\n   * Renders the game based on current state\r\n   */\r\n  render() {\r\n    // switch states to get content\r\n    var content = null;\r\n\r\n    switch(this.state.current) {\r\n      case STATE_LOADING:\r\n        content = this.renderLoadingScreen();\r\n        break;\r\n      case STATE_RUNNING:\r\n        content = this.renderGame();  \r\n        break;\r\n      default:\r\n        console.log(\"Unknown game state: Game state must be one of the defined ones\");\r\n        break;\r\n    }\r\n     return content;\r\n  }\r\n\r\n  // Renders Game\r\n  renderGame() {\r\n    return (\r\n      <div className=\"game\" >\r\n        <div>\r\n          <Board data={this.state.data} isNewBoard={this.state.isNewBoard} \r\n                  selectedBlock={this.state.selectedBlock} \r\n                  blocksSheet={blocksSheet} blocksData={blocksData}/>\r\n        </div>\r\n        <div className=\"game-info\">\r\n          <FpsView width={40} height={10} left={0} top={0}/>\r\n          <div>{/* status */}</div>\r\n          <ol>{/* TODO */}</ol>\r\n        </div>\r\n        <div className=\"game-ui\">\r\n          {this.accordions()}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Loads game and render loading screen\r\n  renderLoadingScreen() {\r\n    return (\r\n      <div className=\"game\" >\r\n        <div>\r\n          {this.state.loadText} ({this.state.loadProgress})\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  /**\r\n   *  Block card\r\n   */\r\n  card (index) {\r\n    let sprite = index+'.png';// sprite is named based on index\r\n    let blockName = blocksData[\"frames\"][sprite][\"name\"];\r\n    let blockDesc = blocksData[\"frames\"][sprite][\"desc\"];\r\n    let blockPrice = blocksData[\"frames\"][sprite][\"price\"];\r\n    return (\r\n      <Card sx={{ display: 'flex' }}>\r\n        <Box sx={{ display: 'flex', flexDirection: 'column' }}>\r\n          <CardContent sx={{ flex: '1 0 auto' }}>\r\n            <Typography component=\"div\" variant=\"h6\">\r\n              {blockName}\r\n            </Typography>\r\n            <Typography variant=\"subtitle2\" color=\"text.secondary\" component=\"div\" sx={{ maxWidth: '13vw' }}>\r\n              {blockDesc}\r\n            </Typography>\r\n          </CardContent>\r\n          <Box sx={{ display: 'flex', alignItems: 'center', pl: 2, pb: 0 }}>\r\n            <Typography variant=\"subtitle1\" color=\"gold\" component=\"div\">\r\n              Price: {blockPrice}\r\n            </Typography>\r\n            <IconButton aria-label=\"buy\" onClick={()=>this.toggleBuild(index)}> \r\n              {this.renderCardButton()}\r\n            </IconButton>\r\n          </Box>\r\n        </Box>\r\n        {/* <CardMedia\r\n          component=\"img\"\r\n          sx={{mt:'5vh' , ml: '5vw', width: 64, height:64}}\r\n          image={tile1}\r\n          alt=\"Live from space album cover\"\r\n        /> */}\r\n        <div style = {{position:'absolute', marginLeft: '75%', marginTop: '10%'}}>\r\n          <SpriteSheet filename={blocksSheet} data={blocksData} sprite={sprite} scaleX={0.25} scaleY={0.25}/>\r\n        </div>\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  // renders card button accordingly to current mode\r\n  renderCardButton() {\r\n    if(!this.isBuilding())\r\n      return (<BuyIcon sx={{ height: 38, width: 38 }}/>)\r\n    else \r\n      return (<CancelIcon sx={{ height: 38, width: 38 }}/>)\r\n  }\r\n\r\n  // toggles build mode by toggling selected block index\r\n  toggleBuild(index) {\r\n    if(this.state.selectedBlock === -1)\r\n      this.setState({selectedBlock: index});\r\n    else\r\n      this.setState({selectedBlock: -1})\r\n  }\r\n\r\n  // if is in building mode\r\n  isBuilding() {return this.state.selectedBlock > -1;}\r\n\r\n  /**\r\n   * Renders each row of virtualized list\r\n   */\r\n  renderRow({ index, key, style }) {\r\n    return (\r\n      <div key={key} style={style} className=\"row\">\r\n        <div className=\"content\">\r\n          <div>{this.card(index)}</div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  //resetBlock = () => {this.setState({selectedBlock: -1})}\r\n\r\n  /**\r\n   * The side UI accordion\r\n   */\r\n  accordions() {\r\n  \r\n    // const handleChange = (panel) => (event, isExpanded) => {\r\n    //   let val = (isExpanded ? panel : false);\r\n    //   this.setState({expanded: val});\r\n    // };\r\n\r\n    /*\r\n    ref={ (ref) => this.accRef=ref }  onMouseDown={(e) => this.handleMouseClick(e)} \r\n                                        onMouseMove={(e) => this.onMouseMove(e)}\r\n                                        onMouseUp={(e) => this.handleMouseClick(e)}*/\r\n    return (\r\n      <div className = 'accordion' onMouseDown={(e) => e.preventDefault()}>\r\n        <div className = 'accordion-child'>\r\n          <Accordion>\r\n            <AccordionSummary\r\n              expandIcon={<ExpandMoreIcon />}\r\n              aria-controls=\"panel1bh-content\"\r\n              id=\"panel1bh-header\"\r\n              sx={{backgroundColor: '#fbeaab', 'border': '1px solid #61265b', borderRadius : '2px'}}\r\n            >\r\n              <Typography sx={{ width: '33%', flexShrink: 0 }}>\r\n                Blocks\r\n              </Typography>\r\n              {/* <Typography sx={{ color: 'text.secondary' }}>You are currently not an owner</Typography> */}\r\n            </AccordionSummary>\r\n            <AccordionDetails  sx={{backgroundColor: '#fbeaab'}}>\r\n              <div className=\"list\">\r\n                <AutoSizer>\r\n                {({ width, height }) => {\r\n                  return <List\r\n                    width={width}\r\n                    height={height}\r\n                    rowHeight={150}\r\n                    rowRenderer={this.renderRow.bind(this)}\r\n                    rowCount={this.list.length} />\r\n                }}\r\n                </AutoSizer>\r\n              </div>\r\n            </AccordionDetails>\r\n          </Accordion>\r\n          <Accordion>\r\n            <AccordionSummary\r\n              expandIcon={<ExpandMoreIcon />}\r\n              aria-controls=\"panel2bh-content\"\r\n              id=\"panel2bh-header\"\r\n            >\r\n              <Typography sx={{ width: '33%', flexShrink: 0 }}>Users</Typography>\r\n              <Typography sx={{ color: 'text.secondary' }}>\r\n                You are currently not an owner\r\n              </Typography>\r\n            </AccordionSummary>\r\n            <AccordionDetails>\r\n              <Typography>\r\n                Donec placerat, lectus sed mattis semper, neque lectus feugiat lectus,\r\n                varius pulvinar diam eros in elit. Pellentesque convallis laoreet\r\n                laoreet.\r\n              </Typography>\r\n            </AccordionDetails>\r\n          </Accordion>\r\n          <Accordion>\r\n            <AccordionSummary\r\n              expandIcon={<ExpandMoreIcon />}\r\n              aria-controls=\"panel3bh-content\"\r\n              id=\"panel3bh-header\"\r\n            >\r\n              <Typography sx={{ width: '33%', flexShrink: 0 }}>\r\n                Advanced settings\r\n              </Typography>\r\n              <Typography sx={{ color: 'text.secondary' }}>\r\n                Filtering has been entirely disabled for whole web server\r\n              </Typography>\r\n            </AccordionSummary>\r\n            <AccordionDetails>\r\n              <Typography>\r\n                Nunc vitae orci ultricies, auctor nunc in, volutpat nisl. Integer sit\r\n                amet egestas eros, vitae egestas augue. Duis vel est augue.\r\n              </Typography>\r\n            </AccordionDetails>\r\n          </Accordion>\r\n          <Accordion>\r\n            <AccordionSummary\r\n              expandIcon={<ExpandMoreIcon />}\r\n              aria-controls=\"panel4bh-content\"\r\n              id=\"panel4bh-header\"\r\n            >\r\n              <Typography sx={{ width: '33%', flexShrink: 0 }}>Personal data</Typography>\r\n            </AccordionSummary>\r\n            <AccordionDetails>\r\n              <Typography>\r\n                Nunc vitae orci ultricies, auctor nunc in, volutpat nisl. Integer sit\r\n                amet egestas eros, vitae egestas augue. Duis vel est augue.\r\n              </Typography>\r\n            </AccordionDetails>\r\n          </Accordion>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n\r\n\r\n\r\n// ========================================\r\n\r\nReactDOM.render(\r\n  <Game />,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}